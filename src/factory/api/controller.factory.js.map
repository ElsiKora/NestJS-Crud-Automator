{"version":3,"file":"controller.factory.js","sourceRoot":"","sources":["controller.factory.ts"],"names":[],"mappings":"AAOA,OAAO,EAAE,UAAU,EAAE,MAAM,gBAAgB,CAAC;AAC5C,OAAO,EAAE,OAAO,EAAE,MAAM,iBAAiB,CAAC;AAC1C,OAAO,EAAE,eAAe,EAAE,MAAM,mBAAmB,CAAC;AAEpD,OAAO,EAAE,iCAAiC,EAAE,+BAA+B,EAAE,MAAM,gBAAgB,CAAC;AACpG,OAAO,EAAE,WAAW,EAAE,aAAa,EAAE,MAAM,YAAY,CAAC;AACxD,OAAO,EAAE,mCAAmC,EAAE,0BAA0B,EAAE,4BAA4B,EAAE,wBAAwB,EAAE,WAAW,EAAE,cAAc,EAAE,yBAAyB,EAAE,MAAM,eAAe,CAAC;AAChN,OAAO,EAAE,4BAA4B,EAAE,MAAM,uDAAuD,CAAC;AACrG,OAAO,EAAE,0BAA0B,EAAE,MAAM,qDAAqD,CAAC;AACjG,OAAO,EAAE,6BAA6B,EAAE,MAAM,yDAAyD,CAAC;AACxG,OAAO,EAAE,mCAAmC,EAAE,MAAM,+DAA+D,CAAC;AACpH,OAAO,EAAE,4BAA4B,EAAE,MAAM,uDAAuD,CAAC;AACrG,OAAO,EAAE,qBAAqB,EAAE,MAAM,mCAAmC,CAAC;AAE1E,MAAM,OAAO,oBAAoB;IAQrB;IACO;IARlB,IAAc,eAAe;QAC5B,OAAO,IAAI,CAAC,MAAM,CAAC,SAA6C,CAAC;IAClE,CAAC;IAEgB,MAAM,CAAiB;IAExC,YACW,MAAqC,EAC9B,UAAuC;QAD9C,WAAM,GAAN,MAAM,CAA+B;QAC9B,eAAU,GAAV,UAAU,CAA6B;QAExD,IAAI,CAAC,MAAM,GAAG,yBAAyB,CAAI,UAAU,CAAC,MAAM,CAAC,CAAC;QAC9D,qBAAqB,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC;QAE9C,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,UAAU,EAAE,CAAC;YAC7B,MAAM,cAAc,CAAC,0BAA0B,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,IAAI,IAAI,iBAAiB,YAAY,CAAC,CAAC;QAC9G,CAAC;QAED,UAAU,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC,CAAC,CAAC,iBAAiB,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QAC/I,OAAO,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,IAAI,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,IAAI,IAAI,iBAAiB,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;IAChG,CAAC;IAED,YAAY,CAAC,MAAqB;QACjC,IAAI,CAAC,CAAC,MAAM,IAAI,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,IAAI,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,SAAS,KAAK,KAAK,EAAE,CAAC;YAChG,MAAM,WAAW,GAAoD,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC;YAC1G,MAAM,eAAe,GAAsD,WAAW,CAAC,UAAU,IAAI,EAAE,CAAC;YACxG,MAAM,UAAU,GAA+C,GAAG,iCAAiC,CAAC,sBAAsB,GAAG,MAAM,EAAgD,CAAC;YAEpL,wBAAwB,CAAI,IAAa,EAAE,IAAI,CAAC,eAAe,EAAE,MAAM,EAAE,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;YACvG,MAAM,YAAY,GAA8C,IAAI,CAAC,eAAe,CAAC,UAAU,CAAC,CAAC;YACjG,0BAA0B,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,eAAe,EAAE,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,UAAU,EAAE,MAAM,EAAE,UAAU,EAAE,WAAW,CAAC,CAAC;YAC7H,4BAA4B,CAAC,YAAY,EAAE,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,UAAU,EAAE,MAAM,EAAE,UAAU,EAAE,WAAW,EAAE,eAAe,CAAC,CAAC;YAC3H,4BAA4B,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,UAAU,EAAE,MAAM,EAAE,WAAW,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;QAU3G,CAAC;IACF,CAAC;IAED,IAAI;QACH,KAAK,MAAM,MAAM,IAAI,MAAM,CAAC,MAAM,CAAC,aAAa,CAAC,EAAE,CAAC;YACnD,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC;QAC3B,CAAC;IACF,CAAC;IAES,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC,MAAqB,EAAE,UAAiE,EAAE,UAAuC,EAAE,cAA6B;QAChM,IAAI,CAAC,eAAe,CAAC,UAAU,CAAC,GAAG,MAAM,CAAC,cAAc,CACvD,KAAK,WAA0C,IAAoB,EAAE,OAA+B,EAAE,EAAU,EAAE,qBAAiD;YAClK,MAAM,UAAU,GAA+C,6BAA6B,CAAI,IAAI,EAAE,cAAc,CAAC,CAAC;YAEtH,IAAI,CAAC,UAAU,EAAE,CAAC;gBACjB,MAAM,cAAc,CAAC,yCAAyC,CAAC,CAAC;YACjE,CAAC;YAED,0BAA0B,CAAmB,UAAU,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,OAAO,EAAE,YAAY,EAAE,UAAU,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,qBAAqB,EAAE,OAAO,EAAE,EAAE,EAAE,CAAC,CAAC;YAC7J,MAAM,4BAA4B,CAAI,UAAU,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,OAAO,EAAE,UAAU,EAAE,UAAU,EAAE,IAAkB,CAAC,CAAC;YACtH,MAAM,mCAAmC,CAAI,IAAI,EAAE,UAAU,EAAE,UAAU,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,OAAO,EAAE,SAAS,EAAE,IAAI,CAAC,CAAC;YAEpH,MAAM,cAAc,GAAM,MAAM,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;YAC1D,MAAM,GAAG,GAA8B,WAAW,CAAC,UAAU,CAAC,MAAM,EAAE,cAAc,EAAE,MAAM,EAAE,WAAW,CAAC,QAAQ,EAAE,UAAU,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,OAAO,EAAE,CAAC,WAAW,CAAC,QAAQ,CAAC,EAAE,UAAU,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,cAAc,EAAE,KAAK,CAAC,CAAC;YAElO,MAAM,iBAAiB,GAAiC;gBACvD,SAAS,EAAE,UAAU,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,QAAQ,EAAE,SAAS;gBACzD,KAAK,EAAE;oBACN,CAAC,UAAU,CAAC,GAAG,CAAC,EAAE,cAAc,CAAC,UAAU,CAAC,GAAG,CAAC;iBACzB;aACxB,CAAC;YAEF,MAAM,QAAQ,GAAM,MAAM,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,iBAAiB,CAAC,CAAC;YAE9D,0BAA0B,CAAmB,UAAU,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,QAAQ,EAAE,YAAY,EAAE,UAAU,EAAE,EAAE,QAAQ,EAAE,EAAE,EAAE,qBAAqB,EAAE,OAAO,EAAE,EAAE,EAAE,CAAC,CAAC;YAElK,OAAO,eAAe,CAAC,GAA0B,EAAE,QAAQ,EAAE;gBAE5D,uBAAuB,EAAE,IAAI;aAC7B,CAAC,CAAC;QACJ,CAAC,EACD,MAAM,EACN,EAAE,KAAK,EAAE,UAAU,EAAE,CACrB,CAAC;IACH,CAAC;IAES,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC,MAAqB,EAAE,UAAiE,EAAE,UAAuC,EAAE,cAA6B;QAChM,IAAI,CAAC,eAAe,CAAC,UAAU,CAAC,GAAG,MAAM,CAAC,cAAc,CACvD,KAAK,WAA0C,UAAsB,EAAE,OAA+B,EAAE,EAAU,EAAE,qBAAiD;YACpK,MAAM,UAAU,GAA+C,6BAA6B,CAAI,UAAU,EAAE,cAAc,CAAC,CAAC;YAE5H,IAAI,CAAC,UAAU,EAAE,CAAC;gBACjB,MAAM,cAAc,CAAC,yCAAyC,CAAC,CAAC;YACjE,CAAC;YAED,0BAA0B,CAAmB,UAAU,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,OAAO,EAAE,YAAY,EAAE,UAAU,EAAE,EAAE,UAAU,EAAE,EAAE,EAAE,qBAAqB,EAAE,OAAO,EAAE,EAAE,EAAE,CAAC,CAAC;YACnK,MAAM,4BAA4B,CAAI,UAAU,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,OAAO,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,CAAC,CAAC;YAC9G,MAAM,mCAAmC,CAAI,IAAI,EAAE,UAAU,EAAE,UAAU,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,OAAO,EAAE,SAAS,EAAE,UAAU,CAAC,CAAC;YAE1H,MAAM,eAAe,GAAkC;gBACtD,CAAC,UAAU,CAAC,GAAG,CAAC,EAAE,UAAU,CAAC,KAAK;aACD,CAAC;YAEnC,MAAM,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,eAAe,CAAC,CAAC;QAC5C,CAAC,EACD,MAAM,EACN,EAAE,KAAK,EAAE,UAAU,EAAE,CACrB,CAAC;IACH,CAAC;IAES,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC,MAAqB,EAAE,UAA8D,EAAE,UAAuC,EAAE,cAA6B;QAC1L,IAAI,CAAC,eAAe,CAAC,UAAU,CAAC,GAAG,MAAM,CAAC,cAAc,CACvD,KAAK,WAA0C,UAAsB,EAAE,OAA+B,EAAE,EAAU,EAAE,qBAAiD;YACpK,MAAM,UAAU,GAA+C,6BAA6B,CAAI,UAAU,EAAE,cAAc,CAAC,CAAC;YAE5H,IAAI,CAAC,UAAU,EAAE,CAAC;gBACjB,MAAM,cAAc,CAAC,yCAAyC,CAAC,CAAC;YACjE,CAAC;YAED,0BAA0B,CAAmB,UAAU,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,OAAO,EAAE,YAAY,EAAE,UAAU,EAAE,EAAE,UAAU,EAAE,EAAE,EAAE,qBAAqB,EAAE,OAAO,EAAE,EAAE,EAAE,CAAC,CAAC;YACnK,MAAM,4BAA4B,CAAI,UAAU,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,OAAO,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,CAAC,CAAC;YAC9G,MAAM,mCAAmC,CAAI,IAAI,EAAE,UAAU,EAAE,UAAU,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,OAAO,EAAE,SAAS,EAAE,UAAU,CAAC,CAAC;YAE1H,MAAM,iBAAiB,GAAiC;gBACvD,SAAS,EAAE,UAAU,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,QAAQ,EAAE,SAAS;gBACzD,KAAK,EAAE;oBACN,CAAC,UAAU,CAAC,GAAG,CAAC,EAAE,UAAU,CAAC,KAAK;iBACX;aACxB,CAAC;YAEF,MAAM,QAAQ,GAAM,MAAM,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,iBAAiB,CAAC,CAAC;YAE9D,0BAA0B,CAAmB,UAAU,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,QAAQ,EAAE,YAAY,EAAE,UAAU,EAAE,EAAE,QAAQ,EAAE,EAAE,EAAE,qBAAqB,EAAE,OAAO,EAAE,EAAE,EAAE,CAAC,CAAC;YAElK,MAAM,GAAG,GAA8B,WAAW,CAAC,UAAU,CAAC,MAAM,EAAE,cAAc,EAAE,MAAM,EAAE,WAAW,CAAC,QAAQ,EAAE,UAAU,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,OAAO,EAAE,CAAC,WAAW,CAAC,QAAQ,CAAC,EAAE,UAAU,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,cAAc,EAAE,KAAK,CAAC,CAAC;YAElO,OAAO,eAAe,CAAC,GAA0B,EAAE,QAAQ,EAAE;gBAE5D,uBAAuB,EAAE,IAAI;aAC7B,CAAC,CAAC;QACJ,CAAC,EACD,MAAM,EACN,EAAE,KAAK,EAAE,UAAU,EAAE,CACrB,CAAC;IACH,CAAC;IAES,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC,MAAqB,EAAE,UAAmE,EAAE,UAAuC,EAAE,cAA6B;QACpM,IAAI,CAAC,eAAe,CAAC,UAAU,CAAC,GAAG,MAAM,CAAC,cAAc,CACvD,KAAK,WAA0C,KAAoC,EAAE,OAA+B,EAAE,EAAU,EAAE,qBAAiD;YAClL,0BAA0B,CAAmB,UAAU,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,OAAO,EAAE,YAAY,EAAE,UAAU,EAAE,EAAE,KAAK,EAAE,EAAE,EAAE,qBAAqB,EAAE,OAAO,EAAE,EAAE,EAAE,CAAC,CAAC;YAC9J,MAAM,4BAA4B,CAAI,UAAU,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,OAAO,EAAE,UAAU,EAAE,UAAU,EAAE,KAAK,CAAC,CAAC;YACzG,MAAM,mCAAmC,CAAI,IAAI,EAAE,UAAU,EAAE,UAAU,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,OAAO,EAAE,SAAS,EAAE,KAAK,CAAC,CAAC;YAErH,MAAM,EAAE,KAAK,EAAE,OAAO,EAAE,cAAc,EAAE,IAAI,EAAE,GAAG,YAAY,EAAE,GAAkC,KAAK,CAAC;YAEvG,MAAM,MAAM,GAA0C,mCAAmC,CAAI,YAAY,EAAE,cAAc,CAAC,CAAC;YAE3H,MAAM,iBAAiB,GAAqC;gBAC3D,SAAS,EAAE,UAAU,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,QAAQ,EAAE,SAAS;gBACzD,IAAI,EAAE,KAAK,CAAC,KAAK,GAAG,CAAC,KAAK,CAAC,IAAI,GAAG,CAAC,CAAC;gBACpC,IAAI,EAAE,KAAK,CAAC,KAAK;gBACjB,KAAK,EAAE,MAAM;aACb,CAAC;YAEF,IAAI,OAAO,EAAE,CAAC;gBACb,iBAAiB,CAAC,KAAK,GAAG;oBACzB,CAAC,OAA0B,CAAC,EAAE,cAAc,IAAI,+BAA+B,CAAC,iCAAiC;iBAC1F,CAAC;YAC1B,CAAC;YAED,MAAM,QAAQ,GAAiC,MAAM,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,iBAAiB,CAAC,CAAC;YAC7F,0BAA0B,CAAmB,UAAU,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,OAAO,EAAE,YAAY,EAAE,UAAU,EAAE,EAAE,QAAQ,EAAE,EAAE,EAAE,qBAAqB,EAAE,OAAO,EAAE,EAAE,EAAE,CAAC,CAAC;YAEjK,MAAM,GAAG,GAA8B,WAAW,CAAC,UAAU,CAAC,MAAM,EAAE,cAAc,EAAE,MAAM,EAAE,WAAW,CAAC,QAAQ,EAAE,UAAU,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,OAAO,EAAE,CAAC,WAAW,CAAC,QAAQ,CAAC,EAAE,UAAU,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,cAAc,EAAE,KAAK,CAAC,CAAC;YAElO,OAAO,eAAe,CAAC,GAAqD,EAAE,QAAQ,EAAE;gBAEvF,uBAAuB,EAAE,IAAI;aAC7B,CAAC,CAAC;QACJ,CAAC,EACD,MAAM,EACN,EAAE,KAAK,EAAE,UAAU,EAAE,CACrB,CAAC;IACH,CAAC;IAES,CAAC,aAAa,CAAC,cAAc,CAAC,CAAC,MAAqB,EAAE,UAAyE,EAAE,UAAuC,EAAE,cAA6B;QAChN,IAAI,CAAC,eAAe,CAAC,UAAU,CAAC,GAAG,MAAM,CAAC,cAAc,CACvD,KAAK,WAA0C,UAAsB,EAAE,IAAoB,EAAE,OAA+B,EAAE,EAAU,EAAE,qBAAiD;YAC1L,MAAM,UAAU,GAA+C,6BAA6B,CAAI,UAAU,EAAE,cAAc,CAAC,CAAC;YAE5H,IAAI,CAAC,UAAU,EAAE,CAAC;gBACjB,MAAM,cAAc,CAAC,yCAAyC,CAAC,CAAC;YACjE,CAAC;YAED,0BAA0B,CAAmB,UAAU,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,OAAO,EAAE,YAAY,EAAE,UAAU,EAAE,EAAE,IAAI,EAAE,UAAU,EAAE,EAAE,EAAE,qBAAqB,EAAE,OAAO,EAAE,EAAE,EAAE,CAAC,CAAC;YACzK,MAAM,4BAA4B,CAAI,UAAU,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,OAAO,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,CAAC,CAAC;YAC9G,MAAM,mCAAmC,CAAI,IAAI,EAAE,UAAU,EAAE,UAAU,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,OAAO,EAAE,SAAS,EAAE,UAAU,CAAC,CAAC;YAE1H,MAAM,eAAe,GAAkC;gBACtD,CAAC,UAAU,CAAC,GAAG,CAAC,EAAE,UAAU,CAAC,KAAK;aACD,CAAC;YAEnC,MAAM,QAAQ,GAAM,MAAM,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,eAAe,EAAE,IAAI,CAAC,CAAC;YAErE,0BAA0B,CAAmB,UAAU,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,OAAO,EAAE,YAAY,EAAE,UAAU,EAAE,EAAE,QAAQ,EAAE,EAAE,EAAE,qBAAqB,EAAE,OAAO,EAAE,EAAE,EAAE,CAAC,CAAC;YAEjK,MAAM,GAAG,GAA8B,WAAW,CAAC,UAAU,CAAC,MAAM,EAAE,cAAc,EAAE,MAAM,EAAE,WAAW,CAAC,QAAQ,EAAE,UAAU,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,OAAO,EAAE,CAAC,WAAW,CAAC,QAAQ,CAAC,EAAE,UAAU,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,cAAc,EAAE,KAAK,CAAC,CAAC;YAElO,OAAO,eAAe,CAAC,GAA0B,EAAE,QAAQ,EAAE;gBAE5D,uBAAuB,EAAE,IAAI;aAC7B,CAAC,CAAC;QACJ,CAAC,EACD,MAAM,EACN,EAAE,KAAK,EAAE,UAAU,EAAE,CACrB,CAAC;IACH,CAAC;IAGS,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC,MAAqB,EAAE,UAAiE,EAAE,UAAuC,EAAE,cAA6B;QAChM,IAAI,CAAC,eAAe,CAAC,UAAU,CAAC,GAAG,MAAM,CAAC,cAAc,CACvD,KAAK,WAA0C,UAAsB,EAAE,IAAoB,EAAE,OAA+B,EAAE,EAAU,EAAE,qBAAiD;YAC1L,MAAM,UAAU,GAA+C,6BAA6B,CAAI,UAAU,EAAE,cAAc,CAAC,CAAC;YAE5H,IAAI,CAAC,UAAU,EAAE,CAAC;gBACjB,MAAM,cAAc,CAAC,yCAAyC,CAAC,CAAC;YACjE,CAAC;YAED,0BAA0B,CAAmB,UAAU,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,OAAO,EAAE,YAAY,EAAE,UAAU,EAAE,EAAE,IAAI,EAAE,UAAU,EAAE,EAAE,EAAE,qBAAqB,EAAE,OAAO,EAAE,EAAE,EAAE,CAAC,CAAC;YACzK,MAAM,4BAA4B,CAAI,UAAU,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,OAAO,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,CAAC,CAAC;YAC9G,MAAM,mCAAmC,CAAI,IAAI,EAAE,UAAU,EAAE,UAAU,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,OAAO,EAAE,SAAS,EAAE,UAAU,CAAC,CAAC;YAE1H,MAAM,eAAe,GAAkC;gBACtD,CAAC,UAAU,CAAC,GAAG,CAAC,EAAE,UAAU,CAAC,KAAK;aACD,CAAC;YAEnC,MAAM,QAAQ,GAAM,MAAM,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,eAAe,EAAE,IAAI,CAAC,CAAC;YAErE,0BAA0B,CAAmB,UAAU,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,OAAO,EAAE,YAAY,EAAE,UAAU,EAAE,EAAE,QAAQ,EAAE,EAAE,EAAE,qBAAqB,EAAE,OAAO,EAAE,EAAE,EAAE,CAAC,CAAC;YAEjK,MAAM,GAAG,GAA8B,WAAW,CAAC,UAAU,CAAC,MAAM,EAAE,cAAc,EAAE,MAAM,EAAE,WAAW,CAAC,QAAQ,EAAE,UAAU,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,OAAO,EAAE,CAAC,WAAW,CAAC,QAAQ,CAAC,EAAE,UAAU,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,cAAc,EAAE,KAAK,CAAC,CAAC;YAElO,OAAO,eAAe,CAAC,GAA0B,EAAE,QAAQ,EAAE;gBAE5D,uBAAuB,EAAE,IAAI;aAC7B,CAAC,CAAC;QACJ,CAAC,EACD,MAAM,EACN,EAAE,KAAK,EAAE,UAAU,EAAE,CACrB,CAAC;IACH,CAAC;CACD","sourcesContent":["import type { Type } from \"@nestjs/common\";\nimport type { ClassConstructor } from \"class-transformer\";\nimport type { DeepPartial, FindOptionsOrder, FindOptionsWhere } from \"typeorm\";\n\nimport type { IApiAuthenticationRequest, IApiControllerPrimaryColumn, IApiControllerProperties, IApiEntity, IApiGetListResponseResult } from \"../../interface\";\nimport type { TApiControllerGetListQuery, TApiControllerMethod, TApiControllerMethodMap, TApiControllerMethodName, TApiControllerMethodNameMap, TApiControllerPropertiesRoute, TApiControllerTargetMethod, TApiFunctionDeleteCriteria, TApiFunctionGetListProperties, TApiFunctionGetListPropertiesWhere, TApiFunctionGetProperties, TApiFunctionUpdateCriteria } from \"../../type\";\n\nimport { Controller } from \"@nestjs/common\";\nimport { ApiTags } from \"@nestjs/swagger\";\nimport { plainToInstance } from \"class-transformer\";\n\nimport { CONTROLLER_API_DECORATOR_CONSTANT, FUNCTION_API_DECORATOR_CONSTANT } from \"../../constant\";\nimport { EApiDtoType, EApiRouteType } from \"../../enum\";\nimport { ApiControllerGetListTransformFilter, ApiControllerTransformData, ApiControllerWriteDtoSwagger, ApiControllerWriteMethod, DtoGenerate, ErrorException, GenerateEntityInformation } from \"../../utility\";\nimport { ApiControllerApplyDecorators } from \"../../utility/api/controller/apply-decorators.utility\";\nimport { ApiControllerApplyMetadata } from \"../../utility/api/controller/apply-metadata.utility\";\nimport { ApiControllerGetPrimaryColumn } from \"../../utility/api/controller/get-primary-column.utility\";\nimport { ApiControllerHandleRequestRelations } from \"../../utility/api/controller/handle-request-relations.utility\";\nimport { ApiControllerValidateRequest } from \"../../utility/api/controller/validate-request.utility\";\nimport { analyzeEntityMetadata } from \"../../utility/dto/analize.utility\";\n\nexport class ApiControllerFactory<E> {\n\tprotected get targetPrototype(): InstanceType<typeof this.target> {\n\t\treturn this.target.prototype as InstanceType<typeof this.target>;\n\t}\n\n\tprivate readonly ENTITY!: IApiEntity<E>;\n\n\tconstructor(\n\t\tprotected target: TApiControllerTargetMethod<E>,\n\t\tprivate readonly properties: IApiControllerProperties<E>,\n\t) {\n\t\tthis.ENTITY = GenerateEntityInformation<E>(properties.entity);\n\t\tanalyzeEntityMetadata(this.properties.entity);\n\n\t\tif (!this.ENTITY.primaryKey) {\n\t\t\tthrow ErrorException(`Primary key for entity ${this.properties.entity.name ?? \"UnknownResource\"} not found`);\n\t\t}\n\n\t\tController(this.properties.path ?? (this.properties.entity.name ? this.properties.entity.name.toLowerCase() : \"UnknownResource\"))(this.target);\n\t\tApiTags(this.properties.name ?? this.properties.entity.name ?? \"UnknownResource\")(this.target);\n\t}\n\n\tcreateMethod(method: EApiRouteType): void {\n\t\tif (!(method in this.properties.routes) || this.properties.routes[method]?.isEnabled !== false) {\n\t\t\tconst routeConfig: TApiControllerPropertiesRoute<E, typeof method> = this.properties.routes[method] ?? {};\n\t\t\tconst routeDecorators: Array<MethodDecorator> | Array<PropertyDecorator> = routeConfig.decorators ?? [];\n\t\t\tconst methodName: TApiControllerMethodNameMap[typeof method] = `${CONTROLLER_API_DECORATOR_CONSTANT.RESERVED_METHOD_PREFIX}${method}` as TApiControllerMethodNameMap[typeof method];\n\n\t\t\tApiControllerWriteMethod<E>(this as never, this.targetPrototype, method, this.properties, this.ENTITY);\n\t\t\tconst targetMethod: TApiControllerMethodMap<E>[typeof method] = this.targetPrototype[methodName];\n\t\t\tApiControllerApplyMetadata(this.target, this.targetPrototype, this.ENTITY, this.properties, method, methodName, routeConfig);\n\t\t\tApiControllerApplyDecorators(targetMethod, this.ENTITY, this.properties, method, methodName, routeConfig, routeDecorators);\n\t\t\tApiControllerWriteDtoSwagger(this.target, this.ENTITY, this.properties, method, routeConfig, this.ENTITY);\n\n\t\t\t// Reflect.defineMetadata(PARAMTYPES_METADATA, [routeConfig.dto.request], this.target, methodNameOnController);\n\t\t\t// Reflect.defineMetadata(PATH_METADATA, `:${this.ENTITY.name}`, this.target, methodNameOnController);\n\n\t\t\t/* const dtoProperties: Record<string, unknown> = (Reflect.getMetadata(DECORATORS.API_MODEL_PROPERTIES, routeConfig.dto.request) || {}) as Record<string, unknown>;\n            const dtoPropertiesArray: Array<unknown> = (Reflect.getMetadata(DECORATORS.API_MODEL_PROPERTIES_ARRAY, routeConfig.dto.request) || []) as Array<unknown>;\n\n            Reflect.defineMetadata(DECORATORS.API_MODEL_PROPERTIES, dtoProperties, routeConfig.dto.request);\n            Reflect.defineMetadata(DECORATORS.API_MODEL_PROPERTIES_ARRAY, dtoPropertiesArray, routeConfig.dto.request); */\n\t\t}\n\t}\n\n\tinit(): void {\n\t\tfor (const method of Object.values(EApiRouteType)) {\n\t\t\tthis.createMethod(method);\n\t\t}\n\t}\n\n\tprotected [EApiRouteType.CREATE](method: EApiRouteType, methodName: TApiControllerMethodName<typeof EApiRouteType.CREATE>, properties: IApiControllerProperties<E>, entityMetadata: IApiEntity<E>): void {\n\t\tthis.targetPrototype[methodName] = Object.defineProperty(\n\t\t\tasync function (this: TApiControllerMethod<E>, body: DeepPartial<E>, headers: Record<string, string>, ip: string, authenticationRequest?: IApiAuthenticationRequest): Promise<E> {\n\t\t\t\tconst primaryKey: IApiControllerPrimaryColumn<E> | undefined = ApiControllerGetPrimaryColumn<E>(body, entityMetadata);\n\n\t\t\t\tif (!primaryKey) {\n\t\t\t\t\tthrow ErrorException(\"Primary key not found in entity columns\");\n\t\t\t\t}\n\n\t\t\t\tApiControllerTransformData<E, typeof method>(properties.routes[method]?.request?.transformers, properties, { body }, { authenticationRequest, headers, ip });\n\t\t\t\tawait ApiControllerValidateRequest<E>(properties.routes[method]?.request?.validators, properties, body as Partial<E>);\n\t\t\t\tawait ApiControllerHandleRequestRelations<E>(this, properties, properties.routes[method]?.request?.relations, body);\n\n\t\t\t\tconst createResponse: E = await this.service.create(body);\n\t\t\t\tconst dto: Type<unknown> | undefined = DtoGenerate(properties.entity, entityMetadata, method, EApiDtoType.RESPONSE, properties.routes[method]?.autoDto?.[EApiDtoType.RESPONSE], properties.routes[method]?.authentication?.guard);\n\n\t\t\t\tconst requestProperties: TApiFunctionGetProperties<E> = {\n\t\t\t\t\trelations: properties.routes[method]?.response?.relations,\n\t\t\t\t\twhere: {\n\t\t\t\t\t\t[primaryKey.key]: createResponse[primaryKey.key],\n\t\t\t\t\t} as FindOptionsWhere<E>,\n\t\t\t\t};\n\n\t\t\t\tconst response: E = await this.service.get(requestProperties);\n\n\t\t\t\tApiControllerTransformData<E, typeof method>(properties.routes[method]?.response?.transformers, properties, { response }, { authenticationRequest, headers, ip });\n\n\t\t\t\treturn plainToInstance(dto as ClassConstructor<E>, response, {\n\t\t\t\t\t// eslint-disable-next-line @elsikora/typescript/naming-convention\n\t\t\t\t\texcludeExtraneousValues: true,\n\t\t\t\t});\n\t\t\t},\n\t\t\t\"name\",\n\t\t\t{ value: methodName },\n\t\t);\n\t}\n\n\tprotected [EApiRouteType.DELETE](method: EApiRouteType, methodName: TApiControllerMethodName<typeof EApiRouteType.DELETE>, properties: IApiControllerProperties<E>, entityMetadata: IApiEntity<E>): void {\n\t\tthis.targetPrototype[methodName] = Object.defineProperty(\n\t\t\tasync function (this: TApiControllerMethod<E>, parameters: Partial<E>, headers: Record<string, string>, ip: string, authenticationRequest?: IApiAuthenticationRequest): Promise<void> {\n\t\t\t\tconst primaryKey: IApiControllerPrimaryColumn<E> | undefined = ApiControllerGetPrimaryColumn<E>(parameters, entityMetadata);\n\n\t\t\t\tif (!primaryKey) {\n\t\t\t\t\tthrow ErrorException(\"Primary key not found in entity columns\");\n\t\t\t\t}\n\n\t\t\t\tApiControllerTransformData<E, typeof method>(properties.routes[method]?.request?.transformers, properties, { parameters }, { authenticationRequest, headers, ip });\n\t\t\t\tawait ApiControllerValidateRequest<E>(properties.routes[method]?.request?.validators, properties, parameters);\n\t\t\t\tawait ApiControllerHandleRequestRelations<E>(this, properties, properties.routes[method]?.request?.relations, parameters);\n\n\t\t\t\tconst requestCriteria: TApiFunctionDeleteCriteria<E> = {\n\t\t\t\t\t[primaryKey.key]: primaryKey.value,\n\t\t\t\t} as TApiFunctionDeleteCriteria<E>;\n\n\t\t\t\tawait this.service.delete(requestCriteria);\n\t\t\t},\n\t\t\t\"name\",\n\t\t\t{ value: methodName },\n\t\t);\n\t}\n\n\tprotected [EApiRouteType.GET](method: EApiRouteType, methodName: TApiControllerMethodName<typeof EApiRouteType.GET>, properties: IApiControllerProperties<E>, entityMetadata: IApiEntity<E>): void {\n\t\tthis.targetPrototype[methodName] = Object.defineProperty(\n\t\t\tasync function (this: TApiControllerMethod<E>, parameters: Partial<E>, headers: Record<string, string>, ip: string, authenticationRequest?: IApiAuthenticationRequest): Promise<E> {\n\t\t\t\tconst primaryKey: IApiControllerPrimaryColumn<E> | undefined = ApiControllerGetPrimaryColumn<E>(parameters, entityMetadata);\n\n\t\t\t\tif (!primaryKey) {\n\t\t\t\t\tthrow ErrorException(\"Primary key not found in entity columns\");\n\t\t\t\t}\n\n\t\t\t\tApiControllerTransformData<E, typeof method>(properties.routes[method]?.request?.transformers, properties, { parameters }, { authenticationRequest, headers, ip });\n\t\t\t\tawait ApiControllerValidateRequest<E>(properties.routes[method]?.request?.validators, properties, parameters);\n\t\t\t\tawait ApiControllerHandleRequestRelations<E>(this, properties, properties.routes[method]?.request?.relations, parameters);\n\n\t\t\t\tconst requestProperties: TApiFunctionGetProperties<E> = {\n\t\t\t\t\trelations: properties.routes[method]?.response?.relations,\n\t\t\t\t\twhere: {\n\t\t\t\t\t\t[primaryKey.key]: primaryKey.value,\n\t\t\t\t\t} as FindOptionsWhere<E>,\n\t\t\t\t};\n\n\t\t\t\tconst response: E = await this.service.get(requestProperties);\n\n\t\t\t\tApiControllerTransformData<E, typeof method>(properties.routes[method]?.response?.transformers, properties, { response }, { authenticationRequest, headers, ip });\n\n\t\t\t\tconst dto: Type<unknown> | undefined = DtoGenerate(properties.entity, entityMetadata, method, EApiDtoType.RESPONSE, properties.routes[method]?.autoDto?.[EApiDtoType.RESPONSE], properties.routes[method]?.authentication?.guard);\n\n\t\t\t\treturn plainToInstance(dto as ClassConstructor<E>, response, {\n\t\t\t\t\t// eslint-disable-next-line @elsikora/typescript/naming-convention\n\t\t\t\t\texcludeExtraneousValues: true,\n\t\t\t\t});\n\t\t\t},\n\t\t\t\"name\",\n\t\t\t{ value: methodName },\n\t\t);\n\t}\n\n\tprotected [EApiRouteType.GET_LIST](method: EApiRouteType, methodName: TApiControllerMethodName<typeof EApiRouteType.GET_LIST>, properties: IApiControllerProperties<E>, entityMetadata: IApiEntity<E>): void {\n\t\tthis.targetPrototype[methodName] = Object.defineProperty(\n\t\t\tasync function (this: TApiControllerMethod<E>, query: TApiControllerGetListQuery<E>, headers: Record<string, string>, ip: string, authenticationRequest?: IApiAuthenticationRequest): Promise<IApiGetListResponseResult<E>> {\n\t\t\t\tApiControllerTransformData<E, typeof method>(properties.routes[method]?.request?.transformers, properties, { query }, { authenticationRequest, headers, ip });\n\t\t\t\tawait ApiControllerValidateRequest<E>(properties.routes[method]?.request?.validators, properties, query);\n\t\t\t\tawait ApiControllerHandleRequestRelations<E>(this, properties, properties.routes[method]?.request?.relations, query);\n\n\t\t\t\tconst { limit, orderBy, orderDirection, page, ...getListQuery }: TApiControllerGetListQuery<E> = query;\n\n\t\t\t\tconst filter: TApiFunctionGetListPropertiesWhere<E> = ApiControllerGetListTransformFilter<E>(getListQuery, entityMetadata);\n\n\t\t\t\tconst requestProperties: TApiFunctionGetListProperties<E> = {\n\t\t\t\t\trelations: properties.routes[method]?.response?.relations,\n\t\t\t\t\tskip: query.limit * (query.page - 1),\n\t\t\t\t\ttake: query.limit,\n\t\t\t\t\twhere: filter,\n\t\t\t\t};\n\n\t\t\t\tif (orderBy) {\n\t\t\t\t\trequestProperties.order = {\n\t\t\t\t\t\t[orderBy as never as string]: orderDirection ?? FUNCTION_API_DECORATOR_CONSTANT.DEFAULT_FILTER_ORDER_BY_DIRECTION,\n\t\t\t\t\t} as FindOptionsOrder<E>;\n\t\t\t\t}\n\n\t\t\t\tconst response: IApiGetListResponseResult<E> = await this.service.getList(requestProperties);\n\t\t\t\tApiControllerTransformData<E, typeof method>(properties.routes[method]?.request?.transformers, properties, { response }, { authenticationRequest, headers, ip });\n\n\t\t\t\tconst dto: Type<unknown> | undefined = DtoGenerate(properties.entity, entityMetadata, method, EApiDtoType.RESPONSE, properties.routes[method]?.autoDto?.[EApiDtoType.RESPONSE], properties.routes[method]?.authentication?.guard);\n\n\t\t\t\treturn plainToInstance(dto as ClassConstructor<IApiGetListResponseResult<E>>, response, {\n\t\t\t\t\t// eslint-disable-next-line @elsikora/typescript/naming-convention\n\t\t\t\t\texcludeExtraneousValues: true,\n\t\t\t\t});\n\t\t\t},\n\t\t\t\"name\",\n\t\t\t{ value: methodName },\n\t\t);\n\t}\n\n\tprotected [EApiRouteType.PARTIAL_UPDATE](method: EApiRouteType, methodName: TApiControllerMethodName<typeof EApiRouteType.PARTIAL_UPDATE>, properties: IApiControllerProperties<E>, entityMetadata: IApiEntity<E>): void {\n\t\tthis.targetPrototype[methodName] = Object.defineProperty(\n\t\t\tasync function (this: TApiControllerMethod<E>, parameters: Partial<E>, body: DeepPartial<E>, headers: Record<string, string>, ip: string, authenticationRequest?: IApiAuthenticationRequest): Promise<E> {\n\t\t\t\tconst primaryKey: IApiControllerPrimaryColumn<E> | undefined = ApiControllerGetPrimaryColumn<E>(parameters, entityMetadata);\n\n\t\t\t\tif (!primaryKey) {\n\t\t\t\t\tthrow ErrorException(\"Primary key not found in entity columns\");\n\t\t\t\t}\n\n\t\t\t\tApiControllerTransformData<E, typeof method>(properties.routes[method]?.request?.transformers, properties, { body, parameters }, { authenticationRequest, headers, ip });\n\t\t\t\tawait ApiControllerValidateRequest<E>(properties.routes[method]?.request?.validators, properties, parameters);\n\t\t\t\tawait ApiControllerHandleRequestRelations<E>(this, properties, properties.routes[method]?.request?.relations, parameters);\n\n\t\t\t\tconst requestCriteria: TApiFunctionUpdateCriteria<E> = {\n\t\t\t\t\t[primaryKey.key]: primaryKey.value,\n\t\t\t\t} as TApiFunctionUpdateCriteria<E>;\n\n\t\t\t\tconst response: E = await this.service.update(requestCriteria, body);\n\n\t\t\t\tApiControllerTransformData<E, typeof method>(properties.routes[method]?.request?.transformers, properties, { response }, { authenticationRequest, headers, ip });\n\n\t\t\t\tconst dto: Type<unknown> | undefined = DtoGenerate(properties.entity, entityMetadata, method, EApiDtoType.RESPONSE, properties.routes[method]?.autoDto?.[EApiDtoType.RESPONSE], properties.routes[method]?.authentication?.guard);\n\n\t\t\t\treturn plainToInstance(dto as ClassConstructor<E>, response, {\n\t\t\t\t\t// eslint-disable-next-line @elsikora/typescript/naming-convention\n\t\t\t\t\texcludeExtraneousValues: true,\n\t\t\t\t});\n\t\t\t},\n\t\t\t\"name\",\n\t\t\t{ value: methodName },\n\t\t);\n\t}\n\n\t// eslint-disable-next-line @elsikora/sonar/no-identical-functions\n\tprotected [EApiRouteType.UPDATE](method: EApiRouteType, methodName: TApiControllerMethodName<typeof EApiRouteType.UPDATE>, properties: IApiControllerProperties<E>, entityMetadata: IApiEntity<E>): void {\n\t\tthis.targetPrototype[methodName] = Object.defineProperty(\n\t\t\tasync function (this: TApiControllerMethod<E>, parameters: Partial<E>, body: DeepPartial<E>, headers: Record<string, string>, ip: string, authenticationRequest?: IApiAuthenticationRequest): Promise<E> {\n\t\t\t\tconst primaryKey: IApiControllerPrimaryColumn<E> | undefined = ApiControllerGetPrimaryColumn<E>(parameters, entityMetadata);\n\n\t\t\t\tif (!primaryKey) {\n\t\t\t\t\tthrow ErrorException(\"Primary key not found in entity columns\");\n\t\t\t\t}\n\n\t\t\t\tApiControllerTransformData<E, typeof method>(properties.routes[method]?.request?.transformers, properties, { body, parameters }, { authenticationRequest, headers, ip });\n\t\t\t\tawait ApiControllerValidateRequest<E>(properties.routes[method]?.request?.validators, properties, parameters);\n\t\t\t\tawait ApiControllerHandleRequestRelations<E>(this, properties, properties.routes[method]?.request?.relations, parameters);\n\n\t\t\t\tconst requestCriteria: TApiFunctionUpdateCriteria<E> = {\n\t\t\t\t\t[primaryKey.key]: primaryKey.value,\n\t\t\t\t} as TApiFunctionUpdateCriteria<E>;\n\n\t\t\t\tconst response: E = await this.service.update(requestCriteria, body);\n\n\t\t\t\tApiControllerTransformData<E, typeof method>(properties.routes[method]?.request?.transformers, properties, { response }, { authenticationRequest, headers, ip });\n\n\t\t\t\tconst dto: Type<unknown> | undefined = DtoGenerate(properties.entity, entityMetadata, method, EApiDtoType.RESPONSE, properties.routes[method]?.autoDto?.[EApiDtoType.RESPONSE], properties.routes[method]?.authentication?.guard);\n\n\t\t\t\treturn plainToInstance(dto as ClassConstructor<E>, response, {\n\t\t\t\t\t// eslint-disable-next-line @elsikora/typescript/naming-convention\n\t\t\t\t\texcludeExtraneousValues: true,\n\t\t\t\t});\n\t\t\t},\n\t\t\t\"name\",\n\t\t\t{ value: methodName },\n\t\t);\n\t}\n}\n"]}