{"version":3,"file":"only-one-of-listed-properties.validator.js","sourceRoot":"","sources":["only-one-of-listed-properties.validator.ts"],"names":[],"mappings":";;;;;;AAEA,OAAO,EAAE,mBAAmB,EAAE,MAAM,iBAAiB,CAAC;AAI/C,IAAM,yBAAyB,GAA/B,MAAM,yBAAyB;IACrC,cAAc,CAAC,UAA+B;QAC7C,OAAO,0DAA0D,UAAU,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC;IACtG,CAAC;IAED,QAAQ,CAAC,MAAe,EAAE,UAA+B;QACxD,MAAM,WAAW,GAAkB,UAAU,CAAC,WAA4B,CAAC;QAE3E,IAAI,WAAW,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;YAC5B,IAAI,KAAK,GAAW,CAAC,CAAC;YACtB,MAAM,eAAe,GAAwB,UAAU,CAAC,MAA6B,CAAC;YAEtF,KAAK,MAAM,UAAU,IAAI,WAAW,EAAE,CAAC;gBACtC,IAAI,MAAM,CAAC,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,eAAe,EAAE,UAAU,CAAC,IAAI,eAAe,CAAC,UAAU,CAAC,KAAK,SAAS,EAAE,CAAC;oBACpH,KAAK,EAAE,CAAC;gBACT,CAAC;YACF,CAAC;YAED,OAAO,KAAK,KAAK,CAAC,CAAC;QACpB,CAAC;QAED,OAAO,IAAI,CAAC;IACb,CAAC;CACD,CAAA;AAvBY,yBAAyB;IADrC,mBAAmB,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,IAAI,EAAE,+BAA+B,EAAE,CAAC;GAChE,yBAAyB,CAuBrC","sourcesContent":["import type { ValidationArguments, ValidatorConstraintInterface } from \"class-validator\";\n\nimport { ValidatorConstraint } from \"class-validator\";\n\n// eslint-disable-next-line @elsikora/typescript/naming-convention\n@ValidatorConstraint({ async: false, name: \"only-one-of-listed-properties\" })\nexport class OnlyOneOfListedProperties implements ValidatorConstraintInterface {\n\tdefaultMessage(properties: ValidationArguments): string {\n\t\treturn `only one of the following properties must be provided: ${properties.constraints.join(\", \")}`;\n\t}\n\n\tvalidate(_value: unknown, properties: ValidationArguments): boolean {\n\t\tconst constraints: Array<string> = properties.constraints as Array<string>;\n\n\t\tif (constraints.length > 0) {\n\t\t\tlet count: number = 0;\n\t\t\tconst indexableObject: Record<string, any> = properties.object as Record<string, any>;\n\n\t\t\tfor (const constraint of constraints) {\n\t\t\t\tif (Object.prototype.hasOwnProperty.call(indexableObject, constraint) && indexableObject[constraint] !== undefined) {\n\t\t\t\t\tcount++;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn count === 1;\n\t\t}\n\n\t\treturn true;\n\t}\n}\n"]}