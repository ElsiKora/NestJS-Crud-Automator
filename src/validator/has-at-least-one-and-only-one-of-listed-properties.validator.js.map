{"version":3,"file":"has-at-least-one-and-only-one-of-listed-properties.validator.js","sourceRoot":"","sources":["has-at-least-one-and-only-one-of-listed-properties.validator.ts"],"names":[],"mappings":";;;;;;AAEA,OAAO,EAAE,mBAAmB,EAAE,MAAM,iBAAiB,CAAC;AAI/C,IAAM,yCAAyC,GAA/C,MAAM,yCAAyC;IACrD,cAAc,CAAC,UAA+B;QAC7C,OAAO,2EAA2E,UAAU,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC;IACvH,CAAC;IAED,QAAQ,CAAC,MAAe,EAAE,UAA+B;QACxD,MAAM,WAAW,GAAkB,UAAU,CAAC,WAA4B,CAAC;QAE3E,IAAI,WAAW,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;YAC5B,IAAI,QAAQ,GAAY,KAAK,CAAC;YAC9B,IAAI,KAAK,GAAW,CAAC,CAAC;YACtB,MAAM,eAAe,GAAwB,UAAU,CAAC,MAA6B,CAAC;YAEtF,KAAK,MAAM,UAAU,IAAI,WAAW,EAAE,CAAC;gBACtC,IAAI,MAAM,CAAC,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,eAAe,EAAE,UAAU,CAAC,IAAI,eAAe,CAAC,UAAU,CAAC,KAAK,SAAS,EAAE,CAAC;oBACpH,QAAQ,GAAG,IAAI,CAAC;oBAChB,KAAK,EAAE,CAAC;gBACT,CAAC;YACF,CAAC;YAED,IAAI,KAAK,KAAK,CAAC,EAAE,CAAC;gBACjB,OAAO,KAAK,CAAC;YACd,CAAC;YAED,OAAO,QAAQ,CAAC;QACjB,CAAC;QAED,OAAO,IAAI,CAAC;IACb,CAAC;CACD,CAAA;AA7BY,yCAAyC;IADrD,mBAAmB,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,IAAI,EAAE,uCAAuC,EAAE,CAAC;GACxE,yCAAyC,CA6BrD","sourcesContent":["import type { ValidationArguments, ValidatorConstraintInterface } from \"class-validator\";\n\nimport { ValidatorConstraint } from \"class-validator\";\n\n// eslint-disable-next-line @elsikora/typescript/naming-convention\n@ValidatorConstraint({ async: false, name: \"has-at-least-one-of-listed-properties\" })\nexport class HasAtLeastOneAndOnlyOneOfListedProperties implements ValidatorConstraintInterface {\n\tdefaultMessage(properties: ValidationArguments): string {\n\t\treturn `at least one and only one of the following properties must be provided: ${properties.constraints.join(\", \")}`;\n\t}\n\n\tvalidate(_value: unknown, properties: ValidationArguments): boolean {\n\t\tconst constraints: Array<string> = properties.constraints as Array<string>;\n\n\t\tif (constraints.length > 0) {\n\t\t\tlet isExists: boolean = false;\n\t\t\tlet count: number = 0;\n\t\t\tconst indexableObject: Record<string, any> = properties.object as Record<string, any>;\n\n\t\t\tfor (const constraint of constraints) {\n\t\t\t\tif (Object.prototype.hasOwnProperty.call(indexableObject, constraint) && indexableObject[constraint] !== undefined) {\n\t\t\t\t\tisExists = true;\n\t\t\t\t\tcount++;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (count !== 1) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn isExists;\n\t\t}\n\n\t\treturn true;\n\t}\n}\n"]}